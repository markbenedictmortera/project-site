select(contains("target "))%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric(),
statusNum = data$Status%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric(),
targetReached = statusNum>targetNum
)
}
PDI <- indicatorYes("PDI")
IRI <- indicatorYes("IRI")
View(IRI)
str(IRI)
#### default settings----
options(scipen=99999)
source("project_indicators.R")
indicatorYes <- function(data) {
if (data == "PDI" & exists("PDI")) {
data <- PDI
} else if (data == "IRI" & exists("IRI")) {
data <- IRI%>%data.table::rbindlist()
} else {
stop("Check if IRI/PDI exists or in the inputs")
}
data <- data%>%
mutate(targetNum = data%>%
select(contains("target "))%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric(),
statusNum = data$Status%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric(),
targetReached = statusNum>targetNum
)
}
PDI <- indicatorYes("PDI")
IRI <- indicatorYes("IRI")
View(IRI)
source("project_indicators.R")
IRI$`Implementation Management and Monitoring and Evaluation`%>%mutate(targetNum = data%>%
select(contains("target "))%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric(),
statusNum = data$Status%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric()
IRI$`Implementation Management and Monitoring and Evaluation`%>%mutate(targetNum = data%>%
select(contains("target "))%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric(),
statusNum = data$Status%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric())
IRI$`Implementation Management and Monitoring and Evaluation`%>%mutate(targetNum = data%>%
select(contains("target "))%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric(),
statusNum = data$Status%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric())
IRI$`Implementation Management and Monitoring and Evaluation`%>%mutate(targetNum = data%>%
select(contains("target "))%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric())
IRI$`Implementation Management and Monitoring and Evaluation`%>%mutate(targetNum = .%>%
select(contains("target "))%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric())
IRI$`Implementation Management and Monitoring and Evaluation`%>%mutate(targetNum =
select(contains("target "))%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric())
IRI$`Implementation Management and Monitoring and Evaluation`%>%select(contains("target "))%>%unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric())
IRI$`Implementation Management and Monitoring and Evaluation`%>%select(contains("target "))%>%unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric()
IRI$`Implementation Management and Monitoring and Evaluation`$Status%>%unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric()
source("project_indicators.R")
indicatorYes <- function(data) {
if (data == "PDI" & exists("PDI")) {
data <- PDI
} else if (data == "IRI" & exists("IRI")) {
data <- IRI%>%data.table::rbindlist()
} else {
stop("Check if IRI/PDI exists or in the inputs")
}
data <- data%>%
mutate(targetNum = data%>%
select(contains("target "))%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric(),
statusNum = data$Status%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric(),
targetReached = statusNum>targetNum
)
}
PDI <- indicatorYes("PDI")
IRI <- indicatorYes("IRI")
IRI
source("project_indicators.R")
indicatorYes <- function(data) {
if (data == "PDI" & exists("PDI")) {
data <- PDI
} else if (data == "IRI" & exists("IRI")) {
data <- IRI%>%data.table::rbindlist()
} else {
stop("Check if IRI/PDI exists or in the inputs")
}
data <- data%>%
mutate(targetNum = data%>%
select(contains("target "))%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric(),
statusNum = data$Status%>%
unlist()%>%
as.vector()%>%
str_remove_all("%")%>%
str_remove_all(",")%>%
str_replace_all(
"Yes","1"
)%>%
str_replace_all(
"No","0"
)%>%
str_trim(side = "both")%>%
as.numeric(),
targetReached = statusNum>=targetNum
)
}
PDI <- indicatorYes("PDI")
IRI <- indicatorYes("IRI")
IRI
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
fontawesome::fa_html_dependency()
source("preprocess_GIS.R")
bed_icon <- awesomeIcons(
"fa-bed",
"fa",
markerColor = "white",
iconColor = "black"
)
free_bed_icon <- makeIcon(
"./icons/bed.png",
iconWidth = 20,
iconHeight = 20
)
plotted_recipient <- leaflet()%>%
addTiles()%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "Mechanical Ventilator"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
group = "Mech Vent")%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "Portable X-ray"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
group = "X-ray")%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "RT-PCR machine"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
group = "RT-PCR machine")%>%
addLayersControl(
baseGroups = c("RT-PCR machine", "X-ray", "Mech Vent"),
options = layersControlOptions(collapsed = FALSE)
)
plotted_recipient
plotted_recipient <- leaflet()%>%
addTiles()%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "Mechanical Ventilator"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
clusterOptions = markerClusterOptions(maxClusterRadius = 10),
group = "Mech Vent")%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "Portable X-ray"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
clusterOptions = markerClusterOptions(maxClusterRadius = 10),
group = "X-ray")%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "RT-PCR machine"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
clusterOptions = markerClusterOptions(maxClusterRadius = 10),
group = "RT-PCR machine")%>%
addLayersControl(
baseGroups = c("RT-PCR machine", "X-ray", "Mech Vent"),
options = layersControlOptions(collapsed = FALSE)
)
plotted_recipient
plotted_recipient <- leaflet()%>%
addTiles()%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "Mechanical Ventilator"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
clusterOptions = markerClusterOptions(maxClusterRadius = 25),
group = "Mech Vent")%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "Portable X-ray"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
clusterOptions = markerClusterOptions(maxClusterRadius = 20),
group = "X-ray")%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "RT-PCR machine"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
clusterOptions = markerClusterOptions(maxClusterRadius = 15),
group = "RT-PCR machine")%>%
addLayersControl(
baseGroups = c("RT-PCR machine", "X-ray", "Mech Vent"),
options = layersControlOptions(collapsed = FALSE)
)
plotted_recipient
plotted_recipient <- leaflet()%>%
addTiles()%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "Mechanical Ventilator"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
clusterOptions = markerClusterOptions(maxClusterRadius = 35),
group = "Mech Vent")%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "Portable X-ray"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
clusterOptions = markerClusterOptions(maxClusterRadius = 30),
group = "X-ray")%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "RT-PCR machine"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
clusterOptions = markerClusterOptions(maxClusterRadius = 10),
group = "RT-PCR machine")%>%
addLayersControl(
baseGroups = c("RT-PCR machine", "X-ray", "Mech Vent"),
options = layersControlOptions(collapsed = FALSE)
)
plotted_recipient
plotted_recipient <- leaflet()%>%
addTiles()%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "Mechanical Ventilator"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
clusterOptions = markerClusterOptions(maxClusterRadius = 25),
group = "Mech Vent")%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "Portable X-ray"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
clusterOptions = markerClusterOptions(maxClusterRadius = 30),
group = "X-ray")%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "RT-PCR machine"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
clusterOptions = markerClusterOptions(maxClusterRadius = 10),
group = "RT-PCR machine")%>%
addLayersControl(
baseGroups = c("RT-PCR machine", "X-ray", "Mech Vent"),
options = layersControlOptions(collapsed = FALSE)
)
plotted_recipient
plotted_recipient <- leaflet()%>%
addTiles()%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "Mechanical Ventilator"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
clusterOptions = markerClusterOptions(maxClusterRadius = 20),
group = "Mech Vent")%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "Portable X-ray"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
clusterOptions = markerClusterOptions(maxClusterRadius = 30),
group = "X-ray")%>%
addMarkers(
data = merged_recipients%>%filter(project_description == "RT-PCR machine"),
lng = ~as.numeric(Longitude),
lat = ~as.numeric(Latitude),
icon = bed_icon,
clusterOptions = markerClusterOptions(maxClusterRadius = 10),
group = "RT-PCR machine")%>%
addLayersControl(
baseGroups = c("RT-PCR machine", "X-ray", "Mech Vent"),
options = layersControlOptions(collapsed = FALSE)
)
plotted_recipient
